# YouTube Video Downloader & SRT Extractor

A comprehensive Python script to download YouTube videos in the highest quality available and extract transcripts/subtitles as SRT files using `yt-dlp`. By default, downloads both video and transcript with automatic language selection.

## ‚ú® Features

### Video Download
- Downloads YouTube videos in the highest quality by default using stream merging
- Uses ffmpeg stream copy (no re-encoding) for fast, lossless merging
- Prefers H.264 codec for maximum compatibility (QuickTime, etc.)
- Shows video information before downloading
- Progress indicator during download
- Option for single-file downloads (faster but lower quality)
- Customizable output directory
- Force download option to overwrite existing files

### Transcript/Subtitle Download
- **NEW**: Download transcripts/subtitles as SRT files
- Supports both manual subtitles and auto-generated captions
- Language selection with automatic fallback options
- Interactive language selection when requested language unavailable
- Auto-language detection for non-interactive use
- Manual subtitles prioritized over auto-generated by default
- List available transcript languages before downloading

### General Features
- **Default behavior**: Downloads both video and transcript with automatic language selection
- Error handling and user-friendly messages
- Supports various YouTube URL formats
- Option to list available video formats
- Debug mode for detailed format information
- Cross-platform compatibility (Windows, macOS, Linux)

## üì¶ Installation

1. Make sure you have Python 3.6+ installed
2. Install the required dependencies:

```bash
pip install -r requirements.txt
```

Or install yt-dlp directly:

```bash
pip install yt-dlp
```

3. **Required for video merging**: Install ffmpeg for stream merging:
   - macOS: `brew install ffmpeg`
   - Ubuntu/Debian: `sudo apt install ffmpeg`
   - Windows: Download from https://ffmpeg.org/download.html

*Note: ffmpeg is not required for transcript downloads or single-file video downloads.*

## üöÄ Usage

### Default Downloads (Video + Transcript)

```bash
# Download both video and transcript (default behavior)
python youtube_downloader.py "https://www.youtube.com/watch?v=VIDEO_ID"

# Download to specific directory
python youtube_downloader.py -o ./my_videos "https://www.youtube.com/watch?v=VIDEO_ID"

# Download with specific transcript language
python youtube_downloader.py --transcript-lang es "https://www.youtube.com/watch?v=VIDEO_ID"

# Disable auto-language selection (prompt user if language not found)
python youtube_downloader.py --no-auto-lang "https://www.youtube.com/watch?v=VIDEO_ID"
```

### Video-Only Downloads

```bash
# Download video only (no transcript)
python youtube_downloader.py --video-only "https://www.youtube.com/watch?v=VIDEO_ID"

# Single file mode (faster, lower quality, no ffmpeg needed)
python youtube_downloader.py --video-only --single-file "https://www.youtube.com/watch?v=VIDEO_ID"

# Force download even if file exists
python youtube_downloader.py --video-only --force "https://www.youtube.com/watch?v=VIDEO_ID"

# List available video formats
python youtube_downloader.py --list-formats "https://www.youtube.com/watch?v=VIDEO_ID"
```

### Transcript-Only Downloads

```bash
# Download transcript only (no video)
python youtube_downloader.py --transcript-only "https://www.youtube.com/watch?v=VIDEO_ID"

# Download Spanish transcript only
python youtube_downloader.py --transcript-only --transcript-lang es "https://www.youtube.com/watch?v=VIDEO_ID"

# Include auto-generated captions
python youtube_downloader.py --transcript-only --include-auto-captions "https://www.youtube.com/watch?v=VIDEO_ID"

# List all available transcript languages
python youtube_downloader.py --list-transcripts "https://www.youtube.com/watch?v=VIDEO_ID"
```

### Advanced Examples

```bash
# Download transcript with auto-captions included
python youtube_downloader.py --include-auto-captions "https://www.youtube.com/watch?v=VIDEO_ID"

# Debug video formats and available transcripts
python youtube_downloader.py --debug "https://www.youtube.com/watch?v=VIDEO_ID"
python youtube_downloader.py --list-transcripts "https://www.youtube.com/watch?v=VIDEO_ID"
```

## üìã Command Line Options

### General Options
- `url`: YouTube video URL (required)
- `-o, --output`: Output directory (default: ./downloads)
- `-h, --help`: Show help message

### Video Download Options
- `--video-only`: Download video only (instead of both video and transcript)
- `-f, --list-formats`: List all available video formats without downloading
- `-s, --single-file`: Download single file with audio (faster but lower quality)
- `-d, --debug`: Show detailed format information for debugging
- `--force`: Force download even if file exists

### Transcript Download Options
- `--transcript-only`: Download transcript/subtitles only (instead of both video and transcript)
- `--transcript-lang`: Language code for transcript (default: en)
- `--include-auto-captions`: Include auto-generated captions (default: manual only)
- `--no-auto-lang`: Disable automatic language selection (prompt user when language not found)
- `--list-transcripts`: List all available transcripts/subtitles for the video

## üéØ Video Quality Modes

### Default Mode (Stream Merging) - **Recommended**
Downloads the highest quality video stream and audio stream separately, then merges them using ffmpeg with stream copy (no re-encoding). This provides the best quality available (4K, 8K if available) while being fast since no re-encoding occurs.

### Single File Mode (--single-file flag)
Downloads the highest quality single file that already contains both video and audio. This is faster and simpler with no post-processing required, but quality is limited to what YouTube provides as pre-merged files (usually max 720p-1080p).

## üìù Transcript Features

### Language Support
The script supports downloading transcripts in any language available for the video. Common language codes include:
- `en` - English
- `es` - Spanish
- `fr` - French
- `de` - German
- `zh-Hans` - Chinese (Simplified)
- `zh-Hant` - Chinese (Traditional)
- `ja` - Japanese
- `ko` - Korean
- `pt` - Portuguese
- `ru` - Russian

### Transcript Types
1. **Manual Subtitles** (preferred): Human-created, high accuracy
2. **Auto-generated Captions**: Machine-generated, may contain errors

### Smart Language Handling
- **Manual Priority**: Always prefers manual subtitles over auto-generated
- **Interactive Fallback**: Prompts user when requested language unavailable
- **Auto-selection**: `--auto-lang` flag automatically uses first available language
- **Clear Feedback**: Shows what languages are available for each video

## üìÅ Output Files

### Video Files
Downloaded videos are saved as: `{Video Title}.{Extension}`

### Transcript Files
Downloaded transcripts are saved as: `{Video Title}.{Language Code}.srt`

Example: `My Video.en.srt` or `ÊàëÁöÑËßÜÈ¢ë.zh-Hans.srt`

## üõ† Troubleshooting

### Video Download Issues

1. **"yt-dlp is not installed" error**
   - Solution: Run `pip install yt-dlp`

2. **"Video unavailable" error**
   - The video might be private, deleted, or region-restricted
   - Try updating yt-dlp: `pip install --upgrade yt-dlp`

3. **ffmpeg errors in merge mode**
   - Install ffmpeg (see installation section)
   - Use `--single-file` flag as alternative

### Transcript Download Issues

1. **"No subtitles found for language 'en'" error**
   - Video may not have English transcripts
   - Use `--list-transcripts` to see available languages
   - Use `--auto-lang` to automatically select available language
   - Try `--include-auto-captions` if only auto-captions available

2. **Interactive prompt doesn't work in scripts**
   - Use `--auto-lang` flag for non-interactive environments
   - Specify exact language with `--transcript-lang`

3. **Transcript file not found**
   - Check the downloads directory
   - Video may not have any transcripts available
   - Some videos only have auto-generated captions

### Common Solutions

```bash
# Check what's available before downloading
python youtube_downloader.py --list-transcripts "URL"
python youtube_downloader.py --list-formats "URL"

# Download with maximum flexibility
python youtube_downloader.py --transcript --auto-lang --include-auto-captions "URL"

# Fallback for difficult videos
python youtube_downloader.py --single-file "URL"
```

## üìÑ Legal Notice

Please respect YouTube's Terms of Service and copyright laws. Only download videos and transcripts that you have permission to download or that are in the public domain.

## üîÑ Updates

To update yt-dlp to the latest version:

```bash
pip install --upgrade yt-dlp
```

This ensures compatibility with the latest YouTube changes.

## ü§ù Contributing

Feel free to submit issues, fork the repository, and create pull requests for any improvements.

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
